<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Track Features Results</title>
</head>
<body>
    <h1>Audio Features</h1>
    {% if features %}
        <table>
            <tr>
                <th>Feature</th>
                <th>Value</th>
            </tr>
            {% for segment in features %}
                <tr><td>Start (s)</td><td>{{ segment['start'] }}</td></tr>
                <tr><td>Duration (s) </td><td>{{ segment['duration'] }}</td></tr>
                <tr><td>Confidence (0 to 1)</td><td>{{ segment['confidence'] }}</td></tr>
                <tr><td>Loudness Start (s)</td><td>{{ segment['loudness_start'] }}</td></tr>
                <tr><td>Loudness Max Time (s)</td><td>{{ segment['loudness_max_time'] }}</td></tr>
                <tr><td>Loudness Max (dB)</td><td>{{ segment['loudness_max'] }}</td></tr>
                <tr><td>Loudness End</td><td>{{ segment['loudness_end'] }}</td></tr>
                <tr>
                    <td>Pitch</td>
                    <td>
                        {% set notes = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'] %}
                        {% for pitch in segment['pitches'] %}
                            {% if pitch == 1.0 %}
                                {{ notes[loop.index0] }}
                            {% endif %}
                        {% endfor %}
                    </td>
                </tr>
                <tr><td>Timbre</td><td>{{ segment['timbre'] }}</td></tr>
                <tr><td colspan="2">-----</td></tr>
            {% endfor %}
        </table>
    {% else %}
        <p>No audio features found for this track.</p>
    {% endif %}
    <a href="/">Back to search</a>
</body>
</html>